appId: com.yourorg.time-manager
productName: Time Manager

directories:
  app: .                 # root containing this package.json and your electron code
  output: dist/release
  buildResources: build  # where icon.png and optional DMG background live

files:
  - electron/**          # main & preload code
  - renderer/dist/**     # built UI from Vite
  - "!renderer/src/**"   # exclude sources
  - "!renderer/vite.config.js"
  - "!**/*.map"

extraResources:
  - from: electron/backend/db/migrations
    to: resources/migrations
    filter:
      - "**/*"
  - from: apps/frontend/electron/build
    to: icons
    filter:
      - tray.png
      - trayTemplate.png 

asar: true
asarUnpack:
  - "**/*.node"                    # unpack native modules
  - "node_modules/better-sqlite3/**"  # belt-and-suspenders for better-sqlite3

npmRebuild: true                  # we rebuild manually before packaging

mac:
  target: [dmg]
  category: public.app-category.productivity
  icon: electron/build/icon.png
  identity: null                   # unsigned for local testing
  hardenedRuntime: false

dmg:
  sign: false
  # Optional customizations:
  # background: build/dmg-background.png
  iconSize: 128
  contents:
  - { x: 130, y: 220, type: file }
  - { x: 410, y: 220, type: link, path: "/Applications" }

win:
  target: [nsis]
  icon: electron/build/icon.png
  artifactName: "${productName}-${version}-win-${arch}.${ext}"

nsis:
  oneClick: true
  perMachine: false
  allowToChangeInstallationDirectory: false

# linux:
#   target: AppImage
#   category: Utility
